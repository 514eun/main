# 1차 코드 설명
# GNS3 기반 인프라 & 네트워크 통합 자동화 파이썬 스크립트

## 프로젝트 소개
Linux 서버(Rocky/Ubuntu) 인프라 구축부터 Cisco 네트워크 장비(라우터 6대, 스위치 10대) 설정 및 백업까지, CLI에서 수동으로 타이핑하며 세팅하던 모든 과정을 Python으로 한 번에 자동화한 프로젝트입니다.

## 제작 배경 (Why I made this)
GNS3 환경에서 복잡한 토폴로지를 구성할 때마다 반복되는 iSCSI/Samba 스토리지 마운트, 웹 서버 초기 세팅, 그리고 수많은 네트워크 장비의 라우팅 상태를 일일이 확인하는 것은 실수 가능성이 있고 시간이 너무 오래 걸렸습니다. 
이  과정들을 메뉴판처럼 만들어서 한 번의 실행으로 끝낼 수는 없을까?"라는 고민에서 시작해, paramiko와 netmiko 라이브러리를 활용한 통합 관리형 CLI 툴을 개발하게 되었습니다.

## 주요 기능

### 1. 네트워크 장비 자동화 (Cisco IOS)
* Netmiko 연동: 라우터 6대, 스위치 10대에 일괄 SSH 접근.
* 원클릭 상태 점검: show ip route, show vtp status, show spanning-tree 등 실무에서 자주 쓰는 11가지 명령어를 메뉴화하여 바로 확인.
* 자동 백업 시스템: 장비별 running-config를 추출해 .txt 파일로 로컬에 자동 백업하고, 필요한 인터페이스 설정만 따로 파싱해서 출력.

### 2. 서버 인프라 원클릭 세팅 (Rocky / Ubuntu 지원)
* 스토리지 자동 구성: iSCSI 타겟/이니시에이터 설정, 사용자별 용량 제한(Quota), Samba/NFS 공유 및 자동 마운트(fstab).
* 웹/DB 서버 배포: Apache 가상 호스트(VirtualHost) 구성, PHP, MariaDB, FTP(vsftpd) 자동 설치 및 초기 계정 세팅.
* DNS 관리: BIND9 환경에서 파이썬 파일 입출력을 통해 도메인 레코드(A 레코드 등) 추가 및 초기화 기능 구현.

### 3. 보안 및 로그 모니터링
* SSH, FTP, Jupyter 접속 로그를 실시간으로 파싱.
* 비정상적인 로그인 실패 로그를 감지하고, 5회 이상 실패 시 "IP 차단 필요" 경고 문구 출력 (보안 관제 기초 로직 직접 구현).

## 사용 기술 및 환경
* Language: Python 3.x
* Library: netmiko, paramiko (SSH 통신)
* Infra: GNS3, Cisco IOS, Rocky Linux, Ubuntu Linux

## 실행 시 주의사항 (Troubleshooting)
초기 실행 시 라이브러리가 없으면 ModuleNotFoundError가 발생할 수 있습니다. 가상환경 세팅 후 아래 패키지를 먼저 설치해 주세요.

```bash
pip install netmiko paramiko
python main.py
```
# 2차 코드 설명
# GNS3 네트워크 인프라 자동화 및 모니터링 구축 

## 프로젝트 개요
1차 프로젝트에서 구현한 단일 장비 접속 및 백업 스크립트를 발전시켜, 팀 단위로 수많은 네트워크 장비를 체계적으로 자산 관리하고 MRTG 모니터링과 연동할 수 있도록한 2차 프로젝트입니다.

## 고도화 배경 (Why Phase 2?)
장비 대수가 늘어나고 팀 협업이 시작되면서, 단순히 명령어를 치는 것을 넘어 장비 목록의 체계화, 주기적인 상태 점검(Ping), 모니터링 시스템 구축의 필요성을 느꼈습니다.
특히 MRTG 모니터링을 위해 수십 대의 라우터와 스위치에 일일이 SNMP 설정을 추가하는 단순 반복 작업을 자동화하고, 중간에 통신 불량 장비가 섞여 있어도 멈추지 않는 견고한 스크립트를 작성하고자 했습니다.

## 핵심 기능

### 1. 팀 단위 장비 자산 관리 시스템 구축
* 텍스트 파일(`data.txt`)에 정리된 장비 리스트를 파이썬으로 파싱하여, 팀원별 디렉토리 구조 및 장비별 개별 관리 파일(`.dat`)을 자동 생성합니다.
* 파일명만으로도 장비의 도메인, IP, 접속 계정을 직관적으로 파악할 수 있도록 파일 시스템 기반의 관리 체계를 만들었습니다.

### 2. 자동 헬스체크(Ping) 및 장애 추적 로깅
* 관리 중인 전체 장비 IP를 추출하여 자동으로 Ping 테스트를 3회씩 수행합니다.
* 응답(TTL)이 없는 장애 장비를 판별하고, 해당 장비의 개별 관리 파일에 장애 발생 시간(Timestamp)과 Ping 에러 상세 내역을 누적 기록하여 즉각적인 추적이 가능하게 했습니다.

### 3. 스마트 설정 추출 (Paramiko 활용)
* 단순 전체 백업(`show run`)을 넘어, VLAN, Trunk, DHCP, 프레임 릴레이 등 목적에 맞는 명령어만 선택적으로 실행합니다.
* NAT 설정 확인 시, 전체 실행 결과에서 문자열 검색(`find`)을 통해 `ip nat pool` 데이터 영역만 깔끔하게 잘라내어 가독성을 크게 높였습니다.

### 4. MRTG 모니터링을 위한 일괄 프로비저닝 (Netmiko 활용)
* 다수의 라우터와 스위치에 SNMP 구성을 원클릭으로 일괄 배포합니다.
* 장비의 역할에 따라 Community String(router / switch)을 변수로 다르게 적용하도록 로직을 설계했습니다.

## 기술 스택
* **Language:** Python 3.x
* **Library:** os, datetime, paramiko, netmiko
* **Network:** Cisco IOS (Router, Switch), SNMP, MRTG

## 트러블슈팅 
Netmiko를 이용해 다량의 장비에 일괄 접속할 때, 꺼져있거나 단절된 단 하나의 장비 때문에 전체 스크립트 프로세스가 중단되는 치명적인 문제가 있었습니다.
이를 해결하기 위해 `NetmikoTimeoutException`과 `NetmikoAuthenticationException` 예외 처리(Try-Except)를 꼼꼼하게 적용했습니다. 접속에 실패한 장비는 건너뛰되, 어떤 에러(타임아웃, 인증 실패 등)로 접속하지 못했는지를 해당 장비 로그 파일에 Append(누적)하도록 수정하여 스크립트의 안정성과 유지보수성을 크게 향상시켰습니다.
